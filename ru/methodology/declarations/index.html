<!DOCTYPE html><html class="ua_js_no"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Декларации / Методология / БЭМ</title><script>(function(e,c){e[c]=e[c].replace(/(ua_js_)no/g,"$1yes");})(document.documentElement,"className");</script><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300,700&amp;subset=cyrillic"/><link rel="stylesheet" href="/bem.info/ru/methodology.min.css"/></head><body class="page"><div class="header"><a class="logo header__logo" href="/bem.info/ru/"><svg class="logo__logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 101.7 84"><path d="M0 13h23.8v7H0zM0 0h23.8v7H0zm42.7 25.9H0v7h41.1c4.5 0 15 .1 18.9 6.4v-3.9c-1.9-6.2-7.5-9.5-17.3-9.5zm.1 13H0v7h41.1c10 0 16.3.4 18.9 1.8v-3.1c-2-4.9-10.4-5.7-17.2-5.7zm-.1 33H0v-7h41.1c4.5 0 15-.1 18.9-6.4v3.9c-1.9 6.2-7.5 9.5-17.3 9.5zm.1-13H0v-7h41.1c10 0 16.3-.4 18.9-1.8v3.1c-2 4.9-10.4 5.7-17.2 5.7zM70.4 84h31.4v-4.3H71.3c-2.7 0-9.1-.1-11.4-3.8v2.4C61 82 64.4 84 70.4 84zm-.1-7.9h31.4v-4.3H71.3c-6.1 0-9.9-.2-11.4-1.1v1.9c1.2 3 6.3 3.5 10.4 3.5z"/></svg></a><ul class="breadcrumbs header__breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/bem.info/ru/methodology/">Методология</a></li></ul><a class="header__forum" href="/bem.info/ru/forum/">Форум</a><ul class="lang-switcher header__lang"><li class="lang-switcher__item"><a class="lang-switcher__link" href="/bem.info/en/methodology/declarations/">en</a></li><li class="lang-switcher__item">ru</li></ul><div class="search i-bem" data-bem='{"search":{}}'><form class="form search__form search__form_site_methodology i-bem" data-bem='{"form":{}}' action="https://yandex.ru/sitesearch" target="_blank"><span class="input input_type_search i-bem" data-bem='{"input":{}}'><span class="input__box"><input class="input__control" name="text" placeholder="Искать" autocomplete="off" type="search"/></span></span><input type="hidden" name="reqenc"/><input type="hidden" name="searchid" value="1944806"/><input type="hidden" name="l10n" value="ru"/><button class="search__submit" type="submit"></button></form><div class="search__open"><svg viewBox="0 0 17 17" xmlns="http://www.w3.org/2000/svg"><circle cx="7" cy="7" r="6"/><path d="M11 11l5 5"/></svg></div><div class="search__close"><svg viewBox="0 0 17 17" xmlns="http://www.w3.org/2000/svg"><path d="M0 0l17 17M0 17L17 0"/></svg></div></div></div><div class="sitemap i-bem" data-bem='{"sitemap":{}}'><div class="sitemap__section"><h1 class="sitemap__title sitemap__title_site_methodology"><a class="sitemap__link" href="/bem.info/ru/methodology/">Методология</a></h1><ul class="sitemap__tree"><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/key-concepts/">Основные понятия</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/naming-convention/">Соглашение по именованию</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/filesystem/">Файловая система</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/build/">Сборка</a></li><li class="sitemap__tree-item-1"><strong class="sitemap__current">Декларации</strong></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/solved-problems/">Какие проблемы решает</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/history/">История создания</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/faq/">FAQ</a></li></ul></div><div class="sitemap__section"><h1 class="sitemap__title sitemap__title_site_tools"><a class="sitemap__link" href="/bem.info/ru/tools/">Инструментарий</a></h1><ul class="sitemap__tree"><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/tools/bem/bem-tools/">bem-tools</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/tools/bem/enb-bem/">enb-bem</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link">Модули</a></li><li class="sitemap__tree-item-2"><a class="sitemap__link" href="/bem.info/ru/tools/bem/bem-naming/">bem-naming</a></li></ul></div><div class="sitemap__section"><h1 class="sitemap__title sitemap__title_site_platform"><a class="sitemap__link">Платформа</a></h1><ul class="sitemap__tree"><li class="sitemap__tree-item-1"><a class="sitemap__link">Технологии</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/technology/i-bem/v2/i-bem-js/">i-bem</a></li><li class="sitemap__tree-item-2"><a class="sitemap__link" href="/bem.info/ru/technology/deps/about/">DEPS</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/technology/bemjson/v2/bemjson/">BEMJSON</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/technology/bemhtml/v2/intro/">BEMHTML</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/technology/bemtree/v2/bemtree/">BEMTREE</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/platform/libs/">Библиотеки</a></li><li class="sitemap__tree-item-2"><a class="sitemap__link" href="/bem.info/ru/platform/libs/bem-core/">bem-core</a></li><li class="sitemap__tree-item-2"><a class="sitemap__link" href="/bem.info/ru/platform/libs/bem-components/">bem-components</a></li><li class="sitemap__tree-item-2"><a class="sitemap__link" href="/bem.info/ru/platform/libs/bem-history/">bem-history</a></li></ul></div><div class="sitemap__section"><h1 class="sitemap__title sitemap__title_site_community"><a class="sitemap__link">Сообщество</a></h1><ul class="sitemap__tree"><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/blog/">Блог</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/events/">События</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/forum/">Форум</a></li></ul></div></div><ul class="nav"><li class="nav__item"><a class="nav__link" href="/bem.info/ru/methodology/key-concepts/">Основные понятия</a></li><li class="nav__item"><a class="nav__link" href="/bem.info/ru/methodology/naming-convention/">Соглашение по именованию</a></li><li class="nav__item"><a class="nav__link" href="/bem.info/ru/methodology/filesystem/">Файловая система</a></li><li class="nav__item"><a class="nav__link" href="/bem.info/ru/methodology/build/">Сборка</a></li><li class="nav__item nav__item_current">Декларации</li><li class="nav__item"><a class="nav__link" href="/bem.info/ru/methodology/solved-problems/">Какие проблемы решает</a></li><li class="nav__item"><a class="nav__link" href="/bem.info/ru/methodology/history/">История создания</a></li><li class="nav__item"><a class="nav__link" href="/bem.info/ru/methodology/faq/">FAQ</a></li></ul><ul class="article-rewind"><li class="article-rewind__prev"><a class="article-rewind__prev-link" href="/bem.info/ru/methodology/build/">Сборка</a></li> <li class="article-rewind__next"><a class="article-rewind__next-link" href="/bem.info/ru/methodology/solved-problems/">Какие проблемы решает</a></li></ul><div class="article"><h1 class="article__heading article__heading_1" id="Декларации-в-БЭМ"><a href="#Декларации-в-БЭМ" class="article__heading-anchor"></a>Декларации в БЭМ</h1><p>Чтобы перечислить БЭМ-сущности, необходимые для построения веб-страницы (читай «частного случая <a href="/methodology/build#bundle">бандла</a>»), можно воспользоваться <strong>декларацией</strong>.</p>
<p>Декларация представляет собой список <a href="/methodology/key-concepts#Блок">блоков</a>, <a href="/methodology/key-concepts#Элемент">элементов</a> и <a href="/methodology/key-concepts#Модификатор">модификаторов</a>, которые используются на странице. Таким образом, инструмент сборки, основываясь на данных из декларации, ограничивает количество сущностей, попадающих в готовый проект. Нет необходимости подключать все блоки проекта, если можно собрать только нужные по списку.</p>
<p><strong>Задача декларации</strong> — определить, что и в каком порядке подключать в сборку.</p>
<blockquote>
<p>В БЭМ-платформе описание страницы создается в формате BEMJSON, а декларация страницы описывается в формате BEMDECL, например:</p>
<pre><code class="lang-js">exports.blocks = [
    { name: <span class="hljs-string">'input'</span> },
    { name: <span class="hljs-string">'button'</span> },
    { name: <span class="hljs-string">'checkbox'</span> }
];
</code></pre>
</blockquote>
<h2 class="article__heading article__heading_2" id="Способы-получения-декларации"><a href="#Способы-получения-декларации" class="article__heading-anchor"></a>Способы получения декларации</h2><p>Декларация может формироваться вручную. Для этого нужно перечислить БЭМ-сущности, участвующие в построении страницы.</p>
<p>Автоматическое построение декларации возможно:</p>
<ul>
<li><a href="#Создание-декларации-по-описанию-страницы">по описанию страницы</a></li>
<li><a href="#Создание-декларации-с-помощью-интроспекции-файловой-системы">с помощью интроспекции файловой системы</a></li>
</ul>
<h3 class="article__heading article__heading_3" id="Создание-декларации-по-описанию-страницы"><a href="#Создание-декларации-по-описанию-страницы" class="article__heading-anchor"></a>Создание декларации по описанию страницы</h3><p>Список необходимых для сборки сущностей можно получить по классам из HTML-файла веб-страницы.</p>
<p>В БЭМ-проекте структура веб-страницы описывается с помощью <a href="/methodology/key-concepts#БЭМ-дерево">БЭМ-дерева</a>. HTML-код страницы содержит классы с именами всех используемых блоков, элементов и модификаторов. БЭМ-дерево может быть построено автоматически по классам из HTML или создано вручную.</p>
<p>При сборке страницы декларация формируется автоматически на основании данных из БЭМ-дерева:</p>
<ul>
<li>Все сущности (блоки, элементы и модификаторы) попадают в декларацию в порядке, указанном в конфигурации сборки.</li>
<li>Если на странице используется одна и та же сущность дважды, в декларацию она попадет только один раз.</li>
<li>Вложенность блоков и элементов в декларации не отображается.</li>
</ul>
<blockquote>
<p>Один из инструментов, позволяющих получить БЭМ-дерево по HTML-структуре страницы, — <a href="https://github.com/bem-incubator/html2bemjson">html2bemjson</a>.</p>
</blockquote>
<p><img src="/e18c239eb834cce9fd6fbaae50be047e51f1089c" alt="Способ создания декларации"></p>
<blockquote>
<p>Пример проекта, в котором формируется отдельная декларация для каждой страницы, — <a href="https://ru.bem.info/tutorials/start-with-project-stub/">Создаем свой проект на БЭМ</a>.</p>
</blockquote>
<h3 class="article__heading article__heading_3" id="Создание-декларации-с-помощью-интроспекции-файловой-системы"><a href="#Создание-декларации-с-помощью-интроспекции-файловой-системы" class="article__heading-anchor"></a>Создание декларации с помощью интроспекции файловой системы</h3><p>Другой источник, откуда можно собрать данные о сущностях — файловая система проекта.
Такой способ построения декларации автоматически включает все сущности, находящиеся в файловой системе проекта. Это обеспечивает стопроцентное попадание в сборку всех необходимых сущностей, но не предоставляет точности: в сборку попадут все имеющиеся сущности, а не только нужные.
Декларация, созданная по описанию страницы, наоборот, обеспечивает точечную сборку нужных БЭМ-сущностей, но не может гарантировать подключение всех сущностей, явно не описанных в HTML-файле страницы.</p>
<p><img src="/f2c192a05b092afe68154c8749a607ebbe747270" alt="Способ создания декларации"></p>
<blockquote>
<p>В <a href="https://ru.bem.info/libs/bem-components/">bem-components</a> создание декларации с помощью интроспекции файловой системы используется для поставки библиотеки в виде <a href="https://ru.bem.info/libs/bem-components/current/#Варианты-поставки-библиотеки">Dist</a>.</p>
</blockquote>
<h2 class="article__heading article__heading_2" id="Алгебра-деклараций"><a href="#Алгебра-деклараций" class="article__heading-anchor"></a>Алгебра деклараций</h2><p>С помощью деклараций можно управлять процессом сборки. Например, можно объединять декларации разных страниц в одну и собирать весь проект целиком, а не постранично. Декларации можно не только совмещать, но и повторно использовать, выделять общие части или различия.</p>
<p>Такое управление дает возможность собирать все страницы в один <a href="/methodology/build#bundle">бандл</a>, догружать необходимые части страницы по требованию или повторно использовать уже собранные общие компоненты на разных страницах.</p>
<h3 class="article__heading article__heading_3" id="Операции-над-декларациями"><a href="#Операции-над-декларациями" class="article__heading-anchor"></a>Операции над декларациями</h3><ul>
<li><a href="#Объединение-нескольких-деклараций-в-одну">сложение</a> — объединение множеств сущностей разных деклараций в одну;</li>
<li><a href="#Получение-разницы-между-декларациями">вычитание</a> — получение разницы между множествами сущностей разных деклараций;</li>
<li><a href="#Получение-декларации-на-основе-пересечения-нескольких-других">пересечение</a> — получение декларации на основании пересечения множеств сущностей двух других деклараций.</li>
</ul>
<h4 class="article__heading article__heading_4" id="Сложение-деклараций"><a href="#Сложение-деклараций" class="article__heading-anchor"></a>Сложение деклараций</h4><p>Применяется для создания общих файлов технологий (например, общего CSS- и JavaScript-файла) для нескольких страниц. Используется, если необходимо загрузить все страницы одновременно и не тратить время на загрузку каждой отдельной страницы при переходе между ними.</p>
<pre><code class="lang-text">Декларация 1            Декларация 2            Декларация 3

[                       [                       [
    'header',               'header',               'header',
    'input',                'input',                'input',
    'button',               'button',               'button',
    'link',                                         'link',
    'attach',     +                        =        'attach',
                            'menu',                 'menu',
                            'image',                'image',
    'checkbox',                                     'checkbox',
                            'popup'                 'popup',
    'textarea'                                      'textarea'
]                       ]                       ]
</code></pre>
<h4 class="article__heading article__heading_4" id="Вычитание-деклараций"><a href="#Вычитание-деклараций" class="article__heading-anchor"></a>Вычитание деклараций</h4><p>Один из способов применения — сборка части страницы, которая догружается по требованию (например, в ответ на действие пользователя).</p>
<pre><code class="lang-text">Декларация 1            Декларация 2            Декларация 3

[                       [                       [
    'button',               'button',
    'checkbox',                                     'checkbox',
    'textarea',                                     'textarea',
    'suggest'                                       'suggest'
                            'header',
                    -       'input',       =
                            'button',
                            'menu',
                            'image',
                            'popup'
]                       ]                       ]
</code></pre>
<p>Например, на странице используется виртуальная клавиатура, которая становится доступна пользователю только в ответ на определенное действие. Нет необходимости включать этот блок в сборку всей страницы, так как это увеличит время загрузки. Кнопки клавиатуры могут быть уже реализованы на странице для других целей. Возможность вычитать декларации позволяет создать отдельный бандл (файлы для части страницы) для недостающей реализации виртуальной клавиатуры и подключать его только по требованию.</p>
<h4 class="article__heading article__heading_4" id="Пересечение-деклараций"><a href="#Пересечение-деклараций" class="article__heading-anchor"></a>Пересечение деклараций</h4><p>Применяется для создания декларации, описывающей общие части разных страниц проекта. Это позволяет собрать общую часть для всех страниц и подключать ее при сборке один раз ко всем страницам.</p>
<pre><code class="lang-text">Декларация 1            Декларация 2            Декларация 3

[                       [                       [
    'header',               'header',               'header',
    'input',                'menu',
    'link',        ⋂        'button',     =
    'attach',               'input',
    'checkbox',             'image',
    'textarea',             'popup',
    'footer'                'footer'                'footer'
]                        ]                       ]
</code></pre>
<p>Например, такое разделение эффективно, если в проекте на всех страницах используется <code>шапка</code> и <code>подвал</code>. Общая часть страниц описывается в отдельной декларации. При сборке каждая страница формируется на основании двух деклараций: общей (содержащей <code>шапку</code> и <code>подвал</code>) и собственной (описывающей оставшуюся часть страницы).</p>
</div><footer class="footer page-bg"><div class="legos legos_inverted"><div class="legos__lego legos__lego_width_2 legos__lego_height_2"></div><div class="legos__lego legos__lego_width_3 legos__lego_height_5"></div><div class="legos__lego legos__lego_height_3"></div><div class="legos__lego legos__lego_width_3"></div><div class="legos__lego legos__lego_height_4"></div><div class="legos__lego legos__lego_width_3 legos__lego_height_4"></div><div class="legos__lego legos__lego_height_4"></div><div class="legos__lego legos__lego_height_2"></div><div class="legos__lego legos__lego_width_3 legos__lego_height_2"></div><div class="legos__lego legos__lego_width_3 legos__lego_height_3"></div><div class="legos__lego legos__lego_width_2 legos__lego_height_3"></div><div class="legos__lego legos__lego_width_3 legos__lego_height_4"></div><div class="legos__lego legos__lego_width_3 legos__lego_height_5"></div><div class="legos__lego legos__lego_width_2 legos__lego_height_5"></div><div class="legos__lego legos__lego_height_2"></div><div class="legos__lego legos__lego_width_3 legos__lego_height_4"></div><div class="legos__lego"></div><div class="legos__lego legos__lego_height_4"></div><div class="legos__lego legos__lego_width_3 legos__lego_height_2"></div><div class="legos__lego legos__lego_width_3 legos__lego_height_4"></div><div class="legos__lego legos__lego_width_3 legos__lego_height_4"></div><div class="legos__lego legos__lego_width_2 legos__lego_height_4"></div><div class="legos__lego legos__lego_height_3"></div><div class="legos__lego legos__lego_width_2 legos__lego_height_3"></div><div class="legos__lego legos__lego_width_3 legos__lego_height_2"></div><div class="legos__lego legos__lego_width_2 legos__lego_height_2"></div><div class="legos__lego legos__lego_height_3"></div><div class="legos__lego legos__lego_width_3 legos__lego_height_5"></div></div><div class="footer__layout"><ul class="footer__community"><li class="footer__channel"><a class="footer__channel-link" href="https://web-standards.slack.com/messages/bem/">Slack</a></li><li class="footer__channel"><a class="footer__channel-link" href="https://www.facebook.com/groups/bem.info/">Facebook</a></li><li class="footer__channel"><a class="footer__channel-link" href="https://twitter.com/bem_ru/">Twitter</a></li></ul></div></footer><script src="/bem.info/ru/methodology.min.js"></script></body></html>