<!DOCTYPE html><html class="ua_js_no"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Сборка / Методология / БЭМ</title><script>(function(e,c){e[c]=e[c].replace(/(ua_js_)no/g,"$1yes");})(document.documentElement,"className");</script><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300,700&amp;subset=cyrillic"/><link rel="stylesheet" href="/bem.info/ru/methodology.min.css"/></head><body class="page"><div class="header"><a class="logo header__logo" href="/bem.info/ru/"><svg class="logo__logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 101.7 84"><path d="M0 13h23.8v7H0zM0 0h23.8v7H0zm42.7 25.9H0v7h41.1c4.5 0 15 .1 18.9 6.4v-3.9c-1.9-6.2-7.5-9.5-17.3-9.5zm.1 13H0v7h41.1c10 0 16.3.4 18.9 1.8v-3.1c-2-4.9-10.4-5.7-17.2-5.7zm-.1 33H0v-7h41.1c4.5 0 15-.1 18.9-6.4v3.9c-1.9 6.2-7.5 9.5-17.3 9.5zm.1-13H0v-7h41.1c10 0 16.3-.4 18.9-1.8v3.1c-2 4.9-10.4 5.7-17.2 5.7zM70.4 84h31.4v-4.3H71.3c-2.7 0-9.1-.1-11.4-3.8v2.4C61 82 64.4 84 70.4 84zm-.1-7.9h31.4v-4.3H71.3c-6.1 0-9.9-.2-11.4-1.1v1.9c1.2 3 6.3 3.5 10.4 3.5z"/></svg></a><ul class="breadcrumbs header__breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/bem.info/ru/methodology/">Методология</a></li></ul><a class="header__forum" href="/bem.info/ru/forum/">Форум</a><ul class="lang-switcher header__lang"><li class="lang-switcher__item"><a class="lang-switcher__link" href="/bem.info/en/methodology/build/">en</a></li><li class="lang-switcher__item">ru</li></ul><div class="search i-bem" data-bem='{"search":{}}'><form class="form search__form search__form_site_methodology i-bem" data-bem='{"form":{}}' action="https://yandex.ru/sitesearch" target="_blank"><span class="input input_type_search i-bem" data-bem='{"input":{}}'><span class="input__box"><input class="input__control" name="text" placeholder="Искать" autocomplete="off" type="search"/></span></span><input type="hidden" name="reqenc"/><input type="hidden" name="searchid" value="1944806"/><input type="hidden" name="l10n" value="ru"/><button class="search__submit" type="submit"></button></form><div class="search__open"><svg viewBox="0 0 17 17" xmlns="http://www.w3.org/2000/svg"><circle cx="7" cy="7" r="6"/><path d="M11 11l5 5"/></svg></div><div class="search__close"><svg viewBox="0 0 17 17" xmlns="http://www.w3.org/2000/svg"><path d="M0 0l17 17M0 17L17 0"/></svg></div></div></div><div class="sitemap i-bem" data-bem='{"sitemap":{}}'><div class="sitemap__section"><h1 class="sitemap__title sitemap__title_site_methodology"><a class="sitemap__link" href="/bem.info/ru/methodology/">Методология</a></h1><ul class="sitemap__tree"><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/key-concepts/">Основные понятия</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/naming-convention/">Соглашение по именованию</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/filesystem/">Файловая система</a></li><li class="sitemap__tree-item-1"><strong class="sitemap__current">Сборка</strong></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/declarations/">Декларации</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/solved-problems/">Какие проблемы решает</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/history/">История создания</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/faq/">FAQ</a></li></ul></div><div class="sitemap__section"><h1 class="sitemap__title sitemap__title_site_tools"><a class="sitemap__link" href="/bem.info/ru/tools/">Инструментарий</a></h1><ul class="sitemap__tree"><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/tools/bem/bem-tools/">bem-tools</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/tools/bem/enb-bem/">enb-bem</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link">Модули</a></li><li class="sitemap__tree-item-2"><a class="sitemap__link" href="/bem.info/ru/tools/bem/bem-naming/">bem-naming</a></li></ul></div><div class="sitemap__section"><h1 class="sitemap__title sitemap__title_site_platform"><a class="sitemap__link">Платформа</a></h1><ul class="sitemap__tree"><li class="sitemap__tree-item-1"><a class="sitemap__link">Технологии</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/technology/i-bem/v2/i-bem-js/">i-bem</a></li><li class="sitemap__tree-item-2"><a class="sitemap__link" href="/bem.info/ru/technology/deps/about/">DEPS</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/technology/bemjson/v2/bemjson/">BEMJSON</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/technology/bemhtml/v2/intro/">BEMHTML</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/technology/bemtree/v2/bemtree/">BEMTREE</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/platform/libs/">Библиотеки</a></li><li class="sitemap__tree-item-2"><a class="sitemap__link" href="/bem.info/ru/platform/libs/bem-core/">bem-core</a></li><li class="sitemap__tree-item-2"><a class="sitemap__link" href="/bem.info/ru/platform/libs/bem-components/">bem-components</a></li><li class="sitemap__tree-item-2"><a class="sitemap__link" href="/bem.info/ru/platform/libs/bem-history/">bem-history</a></li></ul></div><div class="sitemap__section"><h1 class="sitemap__title sitemap__title_site_community"><a class="sitemap__link">Сообщество</a></h1><ul class="sitemap__tree"><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/blog/">Блог</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/events/">События</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/forum/">Форум</a></li></ul></div></div><ul class="nav"><li class="nav__item"><a class="nav__link" href="/bem.info/ru/methodology/key-concepts/">Основные понятия</a></li><li class="nav__item"><a class="nav__link" href="/bem.info/ru/methodology/naming-convention/">Соглашение по именованию</a></li><li class="nav__item"><a class="nav__link" href="/bem.info/ru/methodology/filesystem/">Файловая система</a></li><li class="nav__item nav__item_current">Сборка</li><li class="nav__item"><a class="nav__link" href="/bem.info/ru/methodology/declarations/">Декларации</a></li><li class="nav__item"><a class="nav__link" href="/bem.info/ru/methodology/solved-problems/">Какие проблемы решает</a></li><li class="nav__item"><a class="nav__link" href="/bem.info/ru/methodology/history/">История создания</a></li><li class="nav__item"><a class="nav__link" href="/bem.info/ru/methodology/faq/">FAQ</a></li></ul><ul class="article-rewind"><li class="article-rewind__prev"><a class="article-rewind__prev-link" href="/bem.info/ru/methodology/filesystem/">Файловая система</a></li> <li class="article-rewind__next"><a class="article-rewind__next-link" href="/bem.info/ru/methodology/declarations/">Декларации</a></li></ul><div class="article"><h1 class="article__heading article__heading_1" id="Методология-сборки-БЭМ-проекта"><a href="#Методология-сборки-БЭМ-проекта" class="article__heading-anchor"></a>Методология сборки БЭМ-проекта</h1><p>Любой проект, построенный по БЭМ-методологии, имеет разветвленную файловую структуру. Причина этого — компонентный подход. <a href="/methodology/key-concepts#Блок">Блоки</a> в БЭМ могут быть реализованы в одной или нескольких <a href="/methodology/key-concepts#Технология-реализации">технологиях</a>. Каждая технология находится в отдельном файле. Как следствие, чтобы получить из отдельных файлов блоков общие файлы проекта, необходимо применить сборку. Для этого можно использовать любой из существующих <a href="#Инструменты-для-сборки">инструментов сборки</a>.</p>
<p>Пример организации файловой структуры БЭМ-проекта:</p>
<pre><code class="lang-files">blocks/                 # Уровень проекта
    input/              # Директория блока input
        input.css       # Реализация блока input в технологии CSS
        input.js        # Реализация блока input в технологии JavaScript
    icon/
        icon.css

library/                # Уровень библиотеки
    input/
        input.js        # Базовая реализация блока input в технологии JavaScript
    button/
</code></pre>
<blockquote>
<p>Подробнее о том, зачем разделять реализацию блока на отдельные файлы читайте в документе <a href="/methodology/filesystem/">Организация файловой системы БЭМ-проекта</a>.</p>
</blockquote>
<p>Сборка решает следующие задачи:</p>
<ul>
<li>объединяет отдельные <a href="/methodology/filesystem#Реализация-блока-разделяется-на-отдельные-файлы">файлы реализаций</a>, разложенные по файловой системе;</li>
<li>подключает в проект только нужные блоки, <a href="/methodology/key-concepts#Элемент">элементы</a> и <a href="/methodology/key-concepts#Модификатор">модификаторы</a> из имеющихся в файловой системе;</li>
<li>учитывает порядок подключения файлов в проект.</li>
</ul>
<h2 class="article__heading article__heading_2" id="Основные-этапы-сборки"><a href="#Основные-этапы-сборки" class="article__heading-anchor"></a>Основные этапы сборки</h2><p>Чтобы из отдельных файлов получить готовую часть проекта (результат сборки), например, веб-страницу, необходимо:</p>
<ul>
<li><a href="#Перечисление-необходимых-блоков-и-элементов-для-создания-страницы">перечислить блоки, элементы и модификаторы, участвующие в построении страницы</a></li>
<li><a href="#Поиск-необходимых-зависимостей-используемых-БЭМ-сущностей">указать зависимости используемых БЭМ-сущностей</a></li>
<li><a href="#Определение-порядка-подключения-БЭМ-сущностей-в-сборку">объединить исходные файлы</a></li>
</ul>
<h3 class="article__heading article__heading_3" id="Результаты-сборки"><a href="#Результаты-сборки" class="article__heading-anchor"></a>Результаты сборки</h3><p>В результате сборки можно получить разные финальные наборы файлов:</p>
<ul>
<li>файлы для отдельной страницы (например, <code>hello.css</code> и <code>hello.js</code>);</li>
<li>общие файлы для всего проекта (например, один <code>project.css</code> и <code>project.js</code>);</li>
<li>файлы для фрагмента страницы, такого как <code>шапка</code> или <code>подвал</code>, которые используются на разных страницах проекта (например, <code>header.css</code> и <code>header.js</code>). Общая часть собирается отдельно и подключается при сборке.</li>
</ul>
<p>Такие наборы файлов, полученные в результате сборки, в БЭМ-методологии принято называть <strong>бандлами</strong>.</p>
<blockquote>
<p>Обратите внимание, в документе сборка рассматривается на примере <strong>страницы</strong> — частного случая бандла.</p>
</blockquote>
<p>В файловой системе результаты сборки отдельных файлов автоматически помещаются в директорию с названием страницы (например, <code>hello</code>):</p>
<pre><code class="lang-files">blocks/                 # Директория, содержащая блоки

bundles/                # Директория, содержащая все результаты сборки (опционально)
    hello/              # Директория страницы hello (создается вручную)
</code></pre>
<p>Пример файловой системы БЭМ-проекта до выполнения сборки:</p>
<pre><code class="lang-files">blocks/                 # Директория, содержащая блоки

bundles/                # Директория, содержащая все результаты сборки
    hello/              # Директория страницы hello
        hello.decl.js   # Список БЭМ-сущностей, необходимых для страницы hello
</code></pre>
<p>Пример файловой системы БЭМ-проекта после выполнения сборки:</p>
<pre><code class="lang-files">blocks/                 # Директория, содержащая блоки

bundles/                # Директория, содержащая все результаты сборки
    hello/              # Директория страницы hello
        hello.decl.js   # Список БЭМ-сущностей, необходимых для страницы hello
        hello.css       # Собранный CSS-файл страницы hello
        hello.js        # Собранный JavaScript-файл страницы hello
</code></pre>
<p>При сборке в проект могут быть включены:</p>
<ul>
<li>все БЭМ-сущности с файловой системы (что значительно увеличивает объем результирующего кода);</li>
<li>только необходимые для построения страницы БЭМ-сущности в строго определенном порядке.</li>
</ul>
<p>Для сборки в проект только нужных БЭМ-сущностей используются (опционально):</p>
<ul>
<li><a href="#Определение-списка-блоков-элементов-и-модификаторов-для-создания-страницы">Декларация</a> — определяет список БЭМ-сущностей, необходимых для создания страницы.</li>
<li><a href="#Поиск-зависимостей">Зависимости</a> — определяют БЭМ-сущности, необходимые для реализации блока.</li>
<li><a href="#Определение-порядка-подключения-БЭМ-сущностей-в-сборку">Уровни переопределения</a> — определяют порядок подключения БЭМ-сущностей в сборку.</li>
</ul>
<h3 class="article__heading article__heading_3" id="Определение-списка-блоков-элементов-и-модификаторов-для-создания-страницы"><a href="#Определение-списка-блоков-элементов-и-модификаторов-для-создания-страницы" class="article__heading-anchor"></a>Определение списка блоков, элементов и модификаторов для создания страницы</h3><p>Чтобы начать сборку страницы, инструмент сборки должен узнать все ее составляющие.</p>
<p><img src="/242fd4ddf25f31d8b6473944d4ad7cd6cb739db8" alt="Декларация"></p>
<p>Первый этап сборки — формирование списка необходимых БЭМ-сущностей. Рассмотрим на примере, для чего и как создается такой список.</p>
<p>В проект подключена библиотека, из которой на странице используются несколько блоков. Нет необходимости включать всю библиотеку в сборку. Достаточно составить список нужного по описанию страницы. Это можно сделать автоматически и вручную. На основании этого списка в сборку попадут только перечисленные блоки. В БЭМ-методологии такой список называется <a href="/methodology/declarations/">декларацией</a>.</p>
<p>Основная задача декларации определить, что и в каком порядке подключать в сборку.</p>
<blockquote>
<p>Подробнее о <a href="/methodology/declarations#Способы-управления-декларациями">способах построения декларации</a>.</p>
</blockquote>
<h3 class="article__heading article__heading_3" id="Поиск-зависимостей"><a href="#Поиск-зависимостей" class="article__heading-anchor"></a>Поиск зависимостей</h3><p>В БЭМ-методологии многие блоки строятся на основании других блоков. Так, например, блок формы поиска (<code>search-form</code>) построен с помощью блоков <code>input</code> (поле ввода) и <code>button</code> (кнопка). Нет необходимости реализовывать блок повторно, если он уже представлен в библиотеке. Новый блок можно построить на основании существующего.</p>
<p><img src="/ab5c631a60f2e3545dd047a4ba157ade9584d062" alt="Пример составного блока"></p>
<p>Чтобы создать блок с помощью другого, уже существующего блока, необходимо указать зависимости между ними. Так, приведенный в примере блок <code>search-form</code> зависит от <code>input</code> и <code>button</code>.</p>
<p>Инструмент сборки получает данные о зависимостях и добавляет все сущности и технологии, необходимые для реализации блока, в процессе сборки. В зависимостях также указывается порядок подключения сущностей.</p>
<p>Существует несколько способов указать зависимости:</p>
<ul>
<li><p>Непосредственно в коде блока.</p>
<ul>
<li>В CSS зависимости можно определять с помощью директивы <a href="http://htmlbook.ru/css/import">@import</a>.</li>
<li>В JavaScript можно декларировать зависимости с помощью модульной системы (например, <a href="https://github.com/amdjs/amdjs-api/wiki/AMD">AMD</a>, <a href="http://www.commonjs.org/">CommonJS</a>) или импортов (<a href="http://ecmascript.org">ECMAScript 2015</a>).</li>
</ul>
</li>
<li><p>В отдельном файле.</p>
<blockquote>
<p>В БЭМ-платформе для указания зависимостей используется технология <a href="https://ru.bem.info/technology/deps/">DEPS</a>.</p>
</blockquote>
<pre><code class="lang-files">blocks/
    input/
        input.css
        input.js
        input.deps.js   # Файл с зависимостями блока input
    button/
        button.css
        button.js
</code></pre>
</li>
</ul>
<h3 class="article__heading article__heading_3" id="Определение-порядка-подключения-БЭМ-сущностей-в-сборку"><a href="#Определение-порядка-подключения-БЭМ-сущностей-в-сборку" class="article__heading-anchor"></a>Определение порядка подключения БЭМ-сущностей в сборку</h3><p>Порядок подключения БЭМ-сущностей в сборку зависит от:</p>
<ul>
<li><p><strong>указанных зависимостей</strong></p>
<p>Зависимости определяют, в каком порядке дополнительная сущность должна попасть в сборку.</p>
</li>
<li><p><strong>используемых уровней переопределения</strong></p>
<p>Важно соблюдать порядок подключения <a href="/methodology/key-concepts#Уровень-переопределения">уровней</a> в сборку. Если сравнить уровни со слоями, то базовый слой – это исходная реализация блока, например, полученная из библиотеки, а каждый последующий слой накладывается сверху и дополняет (наследует) или изменяет базовую реализацию. Поэтому важно, чтобы в сборку сначала попадала исходная реализация, а затем изменения со всех уровней переопределения.</p>
</li>
</ul>
<p>На схеме показан принцип использования уровней переопределения при сборке: с уровня <code>common</code> подключаются общие компоненты для всех платформ, а с уровней <code>desktop</code> и <code>touch</code> — компоненты, специфичные для каждой из платформ.</p>
<p><img src="/3d9eb6298bf59b2ed359a9c2ac480618750f017b" alt="Уровни переопределения"></p>
<p>Подробно об использовании уровней переопределения читайте в примерах:</p>
<ul>
<li><a href="/methodology/filesystem#Подключение-библиотеки">Переопределение блоков библиотеки</a></li>
<li><a href="/methodology/filesystem#Разделение-проекта-на-платформы">Разделение проекта на платформы</a></li>
</ul>
<h2 class="article__heading article__heading_2" id="Инструменты-для-сборки"><a href="#Инструменты-для-сборки" class="article__heading-anchor"></a>Инструменты для сборки</h2><p>Выбор инструмента для сборки зависит от сложности БЭМ-проекта, наличия в нем уровней переопределения и использования зависимостей.</p>
<p>БЭМ-методология не ограничивает выбор инструмента — можно использовать любые сборщики (например, Gulp, Grunt, Brunch, Broccoli), отвечающие требованиям вашего проекта.</p>
<blockquote>
<p>Пример сборки БЭМ-проекта с помощью <a href="http://gulpjs.com/">Gulp</a> — <a href="https://ru.bem.info/events/beminar-july-2015/">Декларативный JavaScript по БЭМ</a>.</p>
</blockquote>
<p>В БЭМ-платформе используется сборщик <a href="https://ru.bem.info/tools/bem/enb-bem/">ENB</a>, который подходит для сборки БЭМ-проектов любой сложности.</p>
<blockquote>
<p>Пример сборки БЭМ-проекта с помощью <a href="https://ru.bem.info/tools/bem/enb-bem/">ENB</a> — <a href="https://ru.bem.info/tutorials/start-with-project-stub/">Создаем свой проект на БЭМ</a>.</p>
</blockquote>
</div><footer class="footer page-bg"><div class="legos legos_inverted"><div class="legos__lego legos__lego_width_2 legos__lego_height_4"></div><div class="legos__lego legos__lego_height_5"></div><div class="legos__lego legos__lego_height_5"></div><div class="legos__lego legos__lego_width_3"></div><div class="legos__lego legos__lego_height_2"></div><div class="legos__lego legos__lego_width_3 legos__lego_height_5"></div><div class="legos__lego legos__lego_width_2 legos__lego_height_4"></div><div class="legos__lego"></div><div class="legos__lego legos__lego_height_5"></div><div class="legos__lego legos__lego_width_2"></div><div class="legos__lego legos__lego_height_3"></div><div class="legos__lego legos__lego_height_4"></div><div class="legos__lego legos__lego_width_2 legos__lego_height_3"></div><div class="legos__lego legos__lego_height_3"></div><div class="legos__lego legos__lego_height_2"></div><div class="legos__lego legos__lego_height_2"></div><div class="legos__lego legos__lego_width_2 legos__lego_height_4"></div><div class="legos__lego legos__lego_height_3"></div><div class="legos__lego legos__lego_width_2 legos__lego_height_3"></div><div class="legos__lego legos__lego_width_2 legos__lego_height_4"></div><div class="legos__lego legos__lego_width_2"></div><div class="legos__lego legos__lego_width_2"></div><div class="legos__lego legos__lego_width_3 legos__lego_height_4"></div><div class="legos__lego legos__lego_height_5"></div><div class="legos__lego legos__lego_height_5"></div><div class="legos__lego legos__lego_width_2 legos__lego_height_3"></div><div class="legos__lego legos__lego_width_2 legos__lego_height_2"></div><div class="legos__lego legos__lego_height_2"></div></div><div class="footer__layout"><ul class="footer__community"><li class="footer__channel"><a class="footer__channel-link" href="https://web-standards.slack.com/messages/bem/">Slack</a></li><li class="footer__channel"><a class="footer__channel-link" href="https://www.facebook.com/groups/bem.info/">Facebook</a></li><li class="footer__channel"><a class="footer__channel-link" href="https://twitter.com/bem_ru/">Twitter</a></li></ul></div></footer><script src="/bem.info/ru/methodology.min.js"></script></body></html>